## 1. 📋 需求規格

### 1.1 功能性需求 


| 編號 | 需求名稱 | 詳細說明 |
| :--- | :--- | :--- |
| **FR-01** | **音訊處理與轉寫** | 系統需支援使用者上傳音訊檔或進行即時錄音，並利用 WhisperX 模型將語音精準轉換為文字逐字稿。 |
| **FR-02** | **AI 重點摘要** | 系統需具備自然語言處理能力，針對轉寫後的長篇文本自動提取關鍵資訊，生成條列式的重點摘要。 |
| **FR-03** | **多語言翻譯** | 系統需提供翻譯功能，允許使用者將轉寫內容或摘要翻譯成指定語言 (如中、英、日)，並支援原文與譯文對照檢視。 |

### 1.2 非功能性需求


| 編號 | 需求名稱 | 詳細說明 |
| :--- | :--- | :--- |
| **NFR-01** | **系統回應效能** | 對於 1 分鐘內的短音訊，轉寫處理時間應低於 **10 秒**；即時語音辨識的延遲時間應控制在 **2 秒** 以內。 |
| **NFR-02** | **跨平台相容性** | 前端介面需採用響應式設計，確保在 Desktop 與 Mobile (iOS/Android) 瀏覽器上皆能完整操作。 |
| **NFR-03** | **辨識準確度** | 在一般室內環境 (背景噪音 < 50dB) 下，語音轉文字的字詞錯誤率 應低於 **10%**。 |

---

## 2. 🧩 功能分解圖 (FDD)
下圖展示系統由上而下的模組拆解結構。

```mermaid
graph TD
    %% --- 樣式設定 ---
    classDef root fill:#1a237e,stroke:#fff,stroke-width:2px,color:#fff;
    classDef module fill:#1565c0,stroke:#fff,stroke-width:1px,color:#fff;
    classDef func fill:#e3f2fd,stroke:#1565c0,stroke-width:1px,color:#000;

    %% --- 節點定義 ---
    Root[語音轉文字全棧系統]:::root

    %% 第一層：模組
    M1[前端互動模組]:::module
    M2[核心處理模組]:::module
    M3[AI 運算引擎]:::module

    %% 第二層：功能細項
    %% M1
    F1_1[檔案上傳 UI]:::func
    F1_2[即時錄音控制]:::func
    F1_3[結果視覺化展示]:::func
    
    %% M2
    F2_1[API 路由分發]:::func
    F2_2[FFmpeg 轉碼預處理]:::func
    F2_3[檔案與紀錄管理]:::func

    %% M3
    F3_1[WhisperX 語音轉寫]:::func
    F3_2[Transformer 摘要生成]:::func
    F3_3[多語言翻譯服務]:::func

    %% --- 連結關係 ---
    Root --> M1
    Root --> M2
    Root --> M3

    M1 --> F1_1
    M1 --> F1_2
    M1 --> F1_3

    M2 --> F2_1
    M2 --> F2_2
    M2 --> F2_3

    M3 --> F3_1
    M3 --> F3_2
    M3 --> F3_3
```

## 3. 使用者案例分析 

本章節描述使用者與系統之間的核心互動流程，包含「音訊轉寫」、「AI 摘要」與「多語言翻譯」三大核心功能。

### 3.1. 系統使用案例圖 
下圖展示了使用者可執行的操作以及各功能之間的相依關係。

```mermaid
graph LR
    %% --- 樣式設定 ---
    classDef actor fill:#fff,stroke:#333,stroke-width:2px;
    classDef usecase fill:#e3f2fd,stroke:#1565c0,stroke-width:2px,color:#000;
    classDef boundary fill:#f5f5f5,stroke:#999,stroke-width:1px,stroke-dasharray: 5 5;

    %% --- 角色 ---
    User((使用者)):::actor

    %% --- 系統邊界 ---
    subgraph System ["語音轉文字全棧系統"]
        direction TB
        
        %% 核心功能
        UC1(上傳或錄製音訊):::usecase
        UC2(檢視轉寫逐字稿):::usecase
        UC3(生成 AI 重點摘要):::usecase
        UC4(多語言翻譯):::usecase
        
        %% 輔助功能
        UC5(匯出與下載):::usecase
    end

    %% --- 互動關係 ---
    User --> UC1
    
    %% 流程邏輯：上傳後才能檢視，檢視後才能摘要或翻譯
    UC1 --> UC2
    UC2 --> UC3
    UC2 --> UC4
    UC2 --> UC5
```
### 3.2. 詳細使用案例說明

以下表格詳細定義了系統核心功能的操作流程、條件與例外狀況。

#### 📄 音訊上傳與即時轉寫

| 項目 | 內容說明  |
| :--- | :--- |
| **使用案例名稱** | **音訊上傳與即時轉寫** |
| **參與者 ** | 一般使用者|
| **前置條件** | 1. 使用者已進入網站首頁。<br>2. 後端 API 與 WhisperX 模型服務運作正常。 |
| **基本流程** | 1. 使用者點擊「上傳檔案」按鈕或點擊「開始錄音」。<br>2. 系統前端顯示上傳進度或錄音波形。<br>3. 上傳完成後，後端自動執行 FFmpeg 降噪與轉碼。<br>4. 系統呼叫 WhisperX 模型進行語音轉文字。<br>5. 系統回傳 JSON 格式逐字稿，並顯示於前端頁面。 |
| **例外流程** | **格式錯誤**：<br>若上傳非音訊檔，系統彈出警告：「不支援的檔案格式」，並重置上傳區塊。<br>**A2. 檔案過大**：<br>若檔案超過 50MB，系統提示：「檔案過大，請壓縮後再試」。 |
| **後置條件** | 畫面顯示完整的語音逐字稿，且資料已暫存於資料庫中。 |

<br>

#### 📝 重點摘要生成

| 項目 | 內容說明|
| :--- | :--- |
| **使用案例名稱** | **生成重點摘要** |
| **參與者** | 一般使用者|
| **前置條件** | **UC-01** 已執行完畢，且畫面上已有轉寫後的文本內容。 |
| **基本流程** | 1. 使用者檢視文本後，點擊「生成摘要」按鈕。<br>2. 系統將文本發送至 Transformer 摘要模型。<br>3. 模型分析語意，提取關鍵資訊。<br>4. 系統回傳摘要結果。<br>5. 前端於介面上（如側邊欄或底部）顯示條列式重點摘要。 |
| **例外流程** | **內容過短**：<br>若原文少於 50 字，系統提示：「內容不足以生成摘要」，不執行運算。 |
| **後置條件** | 使用者可閱讀摘要內容，並可進行複製或儲存。 |

<br>

#### 🌍：多語言翻譯服務

| 項目| 內容說明 |
| :--- | :--- |
| **使用案例名稱** | **多語言翻譯** |
| **參與者** | 一般使用者 |
| **前置條件** | 畫面顯示轉寫文本或摘要內容。 |
| **基本流程** | 1. 使用者於下拉選單選擇目標語言（例如：English, Japanese）。<br>2. 使用者點擊「翻譯 」按鈕。<br>3. 系統呼叫翻譯模型處理當前文本。<br>4. 系統回傳翻譯後的文字。<br>5. 前端以「雙欄對照」或「覆蓋」方式顯示翻譯結果。 |
| **例外流程** | **服務連線逾時**：<br>若翻譯請求超過 15 秒無回應，系統顯示：「翻譯服務忙碌中，請稍後再試」。 |
| **後置條件** | 畫面顯示目標語言的內容，使用者可隨時切換回原文。 |
